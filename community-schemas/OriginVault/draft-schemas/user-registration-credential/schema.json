{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/decentralized-identity/credential-schemas/main/community-schemas/OriginVault/draft-schemas/user-registration-credential/schema.json",
  "title": "OriginVault User Registration Credential",
  "description": "A credential that records a user registration event using Schema.org RegisterAction and Person types for maximum interoperability.",
  "type": "object",
  "properties": {
    "@context": {
      "type": "string",
      "format": "uri",
      "default": "https://raw.githubusercontent.com/decentralized-identity/credential-schemas/main/community-schemas/OriginVault/draft-schemas/user-registration-credential/context.json"
    },
    "credentialSubject": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uri",
          "description": "The unique identifier for the user registration event."
        },
        "schema:RegisterAction": {
          "type": "object",
          "properties": {
            "@type": {
              "type": "string",
              "enum": ["RegisterAction"],
              "default": "RegisterAction"
            },
            "schema:agent": {
              "oneOf": [
                {
                  "type": "string",
                  "format": "uri",
                  "description": "DID or URI of the registrant."
                },
                {
                  "type": "object",
                  "properties": {
                    "@type": {
                      "type": "string",
                      "enum": ["Person"],
                      "default": "Person"
                    },
                    "schema:@id": {
                      "type": "string",
                      "format": "uri"
                    },
                    "schema:name": {
                      "type": "string",
                      "description": "Full name of the person."
                    },
                    "schema:email": {
                      "type": "string",
                      "format": "email",
                      "description": "Email address of the person."
                    },
                    "schema:identifier": {
                      "type": "object",
                      "properties": {
                        "schema:propertyID": { "type": "string" },
                        "schema:value": { "type": "string" }
                      },
                      "required": ["schema:propertyID", "schema:value"],
                      "additionalProperties": false
                    },
                    "schema:address": {
                      "type": "object",
                      "properties": {
                        "schema:addressCountry": { "type": "string" },
                        "schema:addressLocality": { "type": "string" },
                        "schema:addressRegion": { "type": "string" }
                      },
                      "additionalProperties": false
                    }
                  },
                  "required": ["@type", "schema:@id"],
                  "additionalProperties": false
                }
              ],
              "description": "The person performing the registration action."
            },
            "schema:object": {
              "type": "object",
              "properties": {
                "@type": {
                  "type": "string",
                  "enum": ["Service", "WebSite", "SoftwareApplication"],
                  "description": "The type of service being registered for."
                },
                "schema:name": {
                  "type": "string",
                  "description": "Name of the service or platform."
                },
                "schema:url": {
                  "type": "string",
                  "format": "uri",
                  "description": "URL of the service."
                },
                "schema:identifier": {
                  "type": "object",
                  "properties": {
                    "schema:propertyID": { "type": "string" },
                    "schema:value": { "type": "string" }
                  },
                  "required": ["schema:propertyID", "schema:value"],
                  "additionalProperties": false
                }
              },
              "required": ["@type", "schema:name"],
              "additionalProperties": false,
              "description": "The service or platform being registered for."
            },
            "schema:target": {
              "type": "object",
              "properties": {
                "@type": {
                  "type": "string",
                  "enum": ["EntryPoint"],
                  "default": "EntryPoint"
                },
                "schema:urlTemplate": {
                  "type": "string",
                  "description": "URL template for the registration endpoint."
                },
                "schema:name": {
                  "type": "string",
                  "description": "Name of the registration endpoint."
                }
              },
              "required": ["@type"],
              "additionalProperties": false,
              "description": "The registration endpoint."
            },
            "schema:startTime": {
              "type": "string",
              "format": "date-time",
              "description": "When the registration action began."
            },
            "schema:endTime": {
              "type": "string",
              "format": "date-time",
              "description": "When the registration action completed."
            },
            "schema:actionStatus": {
              "type": "string",
              "enum": ["ActiveActionStatus", "CompletedActionStatus", "FailedActionStatus", "PotentialActionStatus"],
              "default": "CompletedActionStatus",
              "description": "Status of the registration action."
            },
            "schema:result": {
              "type": "object",
              "properties": {
                "@type": {
                  "type": "string",
                  "enum": ["Person"],
                  "default": "Person"
                },
                "schema:@id": {
                  "type": "string",
                  "format": "uri",
                  "description": "Reference to the registered user."
                },
                "schema:name": {
                  "type": "string",
                  "description": "Name of the registered user."
                },
                "schema:email": {
                  "type": "string",
                  "format": "email",
                  "description": "Email of the registered user."
                },
                "schema:identifier": {
                  "type": "object",
                  "properties": {
                    "schema:propertyID": { "type": "string" },
                    "schema:value": { "type": "string" }
                  },
                  "required": ["schema:propertyID", "schema:value"],
                  "additionalProperties": false
                },
                "schema:accountId": {
                  "type": "string",
                  "description": "Account identifier for the registered user."
                },
                "schema:username": {
                  "type": "string",
                  "description": "Username chosen by the registrant."
                }
              },
              "required": ["@type", "schema:@id"],
              "additionalProperties": false,
              "description": "The registered user as a Person object."
            },
            "schema:error": {
              "type": "object",
              "properties": {
                "@type": {
                  "type": "string",
                  "enum": ["Thing"],
                  "default": "Thing"
                },
                "schema:name": {
                  "type": "string",
                  "description": "Name of the error."
                },
                "schema:description": {
                  "type": "string",
                  "description": "Description of the error."
                }
              },
              "required": ["@type"],
              "additionalProperties": false,
              "description": "Error information if registration failed."
            },
            "schema:instrument": {
              "type": "object",
              "properties": {
                "@type": {
                  "type": "string",
                  "enum": ["SoftwareApplication", "WebSite"],
                  "description": "The application or website used for registration."
                },
                "schema:name": {
                  "type": "string",
                  "description": "Name of the registration tool."
                },
                "schema:url": {
                  "type": "string",
                  "format": "uri",
                  "description": "URL of the registration tool."
                }
              },
              "required": ["@type"],
              "additionalProperties": false,
              "description": "The tool or application used for registration."
            },
            "schema:location": {
              "type": "object",
              "properties": {
                "@type": {
                  "type": "string",
                  "enum": ["Place", "PostalAddress"],
                  "description": "Location where registration occurred."
                },
                "schema:addressCountry": { "type": "string" },
                "schema:addressLocality": { "type": "string" },
                "schema:addressRegion": { "type": "string" }
              },
              "required": ["@type"],
              "additionalProperties": false,
              "description": "Geographic location of the registration."
            }
          },
          "required": ["@type", "schema:agent", "schema:object", "schema:actionStatus"],
          "additionalProperties": false,
          "description": "The registration action following Schema.org RegisterAction specification."
        },
        "schema:identifier": {
          "type": "object",
          "properties": {
            "schema:propertyID": { "type": "string" },
            "schema:value": { "type": "string" }
          },
          "required": ["schema:propertyID", "schema:value"],
          "additionalProperties": false,
          "description": "Structured identifier for the registration event."
        }
      },
      "required": ["id", "schema:RegisterAction"],
      "additionalProperties": false
    }
  },
  "required": ["credentialSubject", "@context"],
  "additionalProperties": false
} 